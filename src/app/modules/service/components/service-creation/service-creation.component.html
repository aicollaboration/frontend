<div class="content-layout fullwidth-standard-normal-scroll">
  <div class="header">
    <div class="left">
      <h1>Create service</h1>
      <p>A service uses existing interfaces that provide the usage of algorithms.<br />Already have a service elsewhere? <a [routerLink]="['..', 'import']">Import a service.</a></p>
    </div>
  </div>

  <div class="main">
    <div *ngIf="isLoading">
      <ul>
        <li *ngFor="let message of loadingMessages">{{message}}</li>
      </ul>

    </div>
    <form [formGroup]="serviceForm" (ngSubmit)="onSubmit()" class="max-w-3xl" *ngIf="!isLoading">
      <div class="flex">
        <mat-form-field class="w-1/3 pr-4">
          <mat-label><b>Service owner</b></mat-label>
          <mat-select placeholder="Select owner" formControlName="owner">
            <mat-option [value]="owner.id" *ngFor="let owner of owners">{{owner.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="w-2/3 pl-4">
          <mat-label><b>Service name</b></mat-label>
          <input matInput formControlName="name" required maxlength="250" type="text" [pattern]="namePattern"
            onkeypress="return new RegExp(this.namePattern).test(event.key)">
          <i>A-Z, a-z, 0-9 and -</i>
        </mat-form-field>
      </div>
      <mat-form-field>
        <mat-label><b>Service template</b></mat-label>
        <mat-select placeholder="Choose from a template" formControlName="template">
          <mat-option value="aicollaboration/service-template-python">aicollaboration/service-template-python
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Description <span class="text-grey-600/25">(optional)</span></mat-label>
        <input matInput formControlName="description" maxlength="250">
      </mat-form-field>
      <hr />
      <mat-radio-group formControlName="visibility">
        <mat-radio-button value="public" class="py-2"><b>Public</b><br>Anyone on the internet can see this
          service. You choose who can access.</mat-radio-button><br>
        <mat-radio-button value="private" class="py-2"><b>Private</b><br>You choose who can see and access this
          service.</mat-radio-button>
      </mat-radio-group>
      <hr />

      <div class="flex">
        <div class="pr-4 mb-4">
          <mat-icon style="font-size: 70px;">find_in_page</mat-icon>
        </div>
        <div class="pl-4">
          Frontend:
          https://{{serviceForm.value.name||'[name]'}}.{{serviceForm.value.owner||'[owner]'}}.aicollaboration.net
          with {{serviceForm.value.visibility}} access<br />
          Source code:
          https://github.com/{{serviceForm.value.owner||'[owner]'}}/{{serviceForm.value.name||'[name]'}}<br /><br />
        </div>
      </div>
      
      <div class="actions">
        <div class="buttons">
          <button class="save-button" mat-flat-button color="primary" type="submit" [disabled]="!serviceForm.valid">
            <mat-icon svgIcon="save"></mat-icon>
            <span>Create service</span>
          </button>
        </div>
      </div>
    </form>
  </div>